---
title: Shopify Theme 性能优化 Checklist（工程视角）
description: 上线前自检清单，聚焦真实影响转化的性能问题
sidebar_position: 10
---

## 1. 性能为什么是 Theme 的核心指标

- 性能直接影响转化：LCP/CLS/TTI 差会让用户看不到关键卖点、按钮抖动、交互延迟。
- Shopify 店铺前端可控空间有限，Theme 是最大变量；好主题撑起转化，差主题放大广告浪费。

## 2. Shopify Theme 的性能瓶颈来源

- Liquid：过多循环/嵌套、无缓存片段、动态查询导致首屏慢。
- 图片：未做裁剪/自适应尺寸、缺少 lazyload、无占位导致 LCP/Cumulative layout shift。
- JS：阻塞脚本、过大 bundle、重复依赖、无必要的全局监听。
- 第三方脚本：埋点/聊天/推荐/热力图叠加，串行加载、未做延迟或条件加载。

## 3. 核心性能指标简述

- LCP（Largest Contentful Paint）：用户看到主要内容的时间，目标 < 2.5s。
- CLS（Cumulative Layout Shift）：布局抖动程度，关键在于提前占位，目标尽量低。
- TTI（Time to Interactive）：页面可交互的时间，关注阻塞脚本与长任务。

## 4. Theme 性能优化 Checklist（按场景）

### PDP
- [ ] 主图/LCP 媒体使用合适尺寸与格式，预加载首屏资源。
- [ ] 非首屏媒体 lazyload，提供宽高/比例占位，避免 CLS。
- [ ] 变体切换只更新必要区域，避免整页重渲染。
- [ ] 价格/库存等状态计算在 JS 层缓存，避免重复请求。
- [ ] 上架/下架、缺货等状态不依赖全量刷新。

### Collection
- [ ] 列表图按网格尺寸裁剪，lazyload + 占位。
- [ ] 筛选/排序使用无刷新更新，避免整页重载。
- [ ] 分页/无限滚动有节流与回收，避免过大 DOM。
- [ ] 列表项脚本最小化，尽量纯渲染。

### Cart
- [ ] Ajax Cart/Drawer 不阻塞首屏；脚本懒加载到首次加购。
- [ ] 数量更新/删除使用轻量请求，状态本地先行反馈。
- [ ] 推荐/Upsell 延迟加载，不阻塞 cart 主体。
- [ ] 结账 CTA 始终可见，按钮区域预留高度防抖动。

### Global
- [ ] 首屏只加载必需 CSS/JS；其余按需/延迟。
- [ ] 样式拆分：关键样式内联或高优先级加载，避免 FOUC。
- [ ] 图片/图标优先用现代格式；Sprite/SVG 取代多图标请求。
- [ ] 节流/防抖滚动与 resize 监听；移除未用的全局监听。
- [ ] 禁止重复依赖：检查 jQuery/Swiper 等是否多次注入。
- [ ] HTTP 请求数控制：第三方脚本合并/延迟/条件加载。
- [ ] Cache：使用 `{% cache %}` 或片段缓存（若适用），减少重复 Liquid 计算。

## 5. 插件/脚本治理建议

- 先盘点：列出所有第三方脚本及注入位置，评估是否必需。
- 条件加载：仅在需要的页面/事件加载（如聊天、热力图、弹窗）。
- 异步与延迟：默认 async/defer；非关键脚本放在首屏之后。
- 单一职责：选一体化方案替代多个重叠插件，减少脚本叠加。
- 回归测试：每次新增/替换插件，重新检查 LCP/CLS/TTI。

## 6. 常见“伪优化”误区

- 只跑分不看体验：把指标做到极限但隐藏核心内容，反而损害转化。
- 一股脑上 CDN/压缩：无视资源分发与依赖顺序，压缩后仍阻塞首屏。
- 盲目删动画：问题在资源/脚本阻塞，删动画但不解决 LCP/TTI。
- 过度懒加载：把首屏关键图片/按钮也懒加载，导致空白或迟滞。
